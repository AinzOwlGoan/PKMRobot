function [theta3, dtheta3_dtheta1, dtheta3_dtheta1_dtheta1, dtheta3_dtheta1_dtheta2, dtheta3_dtheta2,...
    theta4, dtheta4_dtheta2, dtheta4_dtheta2_dtheta2, dtheta4_dtheta2_dtheta1, dtheta4_dtheta1] = Derivate_theta34(theta1, theta2)
% INPUT: theta1 e theta2
% OUTPUT: theta3 e theta4 e le loro derivate parziali rispetto a theta1 e theta2
% syms theta1 theta2
d = 0.09;
l = 0.25;
C = cos(theta1) - cos(theta2) -2*d/l;
S = sin(theta1) - sin(theta2);

%% DERIVATE THETA 3
% TN_3 =  (- C^2 - S^2)/2;
% theta3 = 2*atan((S - sqrt(C^2 + S^2 - TN_3^2))/(C+TN_3))

theta3 = 2*atan((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 +...
    (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))/(cos(theta2) - cos(theta1) +...
    (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25));
 
%dtheta3_dtheta1 = simplify(diff(theta3, theta1))
dtheta3_dtheta1 = -(2*((cos(theta1) - (2*sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 +...
    (sin(theta1) - sin(theta2))^2/2)*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))) +...
    2*cos(theta1)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 +...
    (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) +...
    18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25) + ((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 -...
    ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))*(sin(theta1) +...
    sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))))/(cos(theta2) - cos(theta1) + (cos(theta2) -...
    cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2))/((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 -...
    ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))^2/(cos(theta2) -...
    cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2 + 1);
 
% dtheta3_dtheta1_dtheta1 = diff(dtheta3_dtheta1, theta1)
dtheta3_dtheta1_dtheta1 = ((2*(cos(theta1) - (2*sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))) + 2*cos(theta1)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))*(sin(theta1) + sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2 - (2*(((sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2)))*(2*sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + 2*cos(theta1)*(sin(theta1) - sin(theta2))) - 2*cos(theta1)^2 - 2*sin(theta1)^2 - 2*cos(theta1)*(cos(theta2) - cos(theta1) + 18/25) + ((cos(theta2) - cos(theta1) + 18/25)^2 + (sin(theta1) - sin(theta2))^2)*(cos(theta1)^2 + sin(theta1)^2 + cos(theta1)*(cos(theta2) - cos(theta1) + 18/25) - sin(theta1)*(sin(theta1) - sin(theta2))) + 2*sin(theta1)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)) - sin(theta1) + ((2*sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - ((cos(theta2) - cos(theta1) + 18/25)^2 + (sin(theta1) - sin(theta2))^2)*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))) + 2*cos(theta1)*(sin(theta1) - sin(theta2)))*(2*sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))) + 2*cos(theta1)*(sin(theta1) - sin(theta2))))/(4*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(3/2))))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25) + (2*(cos(theta1) - (2*sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - ((cos(theta2) - cos(theta1) + 18/25)^2 + (sin(theta1) - sin(theta2))^2)*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))) + 2*cos(theta1)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))*(sin(theta1) + sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2 + (4*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))*(sin(theta1) + sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2)))^2)/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^3 - (2*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))*(cos(theta1) + cos(theta1)^2 + sin(theta1)^2 + cos(theta1)*(cos(theta2) - cos(theta1) + 18/25) - sin(theta1)*(sin(theta1) - sin(theta2))))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2)/((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))^2/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2 + 1) - (((2*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))^2*(sin(theta1) + sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^3 + (2*(cos(theta1) - (2*sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))) + 2*cos(theta1)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2)*((2*(cos(theta1) - (2*sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - ((cos(theta2) - cos(theta1) + 18/25)^2 + (sin(theta1) - sin(theta2))^2)*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))) + 2*cos(theta1)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25) + (2*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))*(sin(theta1) + sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2))/((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))^2/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2 + 1)^2;
 
%dtheta3_dtheta1_dtheta2 = diff(dtheta3_dtheta1, theta2)
dtheta3_dtheta1_dtheta2 = (((2*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))^2*(sin(theta2) + sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^3 + (2*(cos(theta2) - (2*sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))) + 2*cos(theta2)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2)*((2*(cos(theta1) - (2*sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - ((cos(theta2) - cos(theta1) + 18/25)^2 + (sin(theta1) - sin(theta2))^2)*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))) + 2*cos(theta1)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25) + (2*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))*(sin(theta1) + sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2))/((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))^2/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2 + 1)^2 - ((2*((2*cos(theta1)*cos(theta2) - (sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2)))*(2*sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + 2*cos(theta2)*(sin(theta1) - sin(theta2))) - ((cos(theta2) - cos(theta1) + 18/25)^2 + (sin(theta1) - sin(theta2))^2)*(cos(theta1)*cos(theta2) + sin(theta1)*sin(theta2)) + 2*sin(theta1)*sin(theta2))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)) - ((2*sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - ((cos(theta2) - cos(theta1) + 18/25)^2 + (sin(theta1) - sin(theta2))^2)*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))) + 2*cos(theta1)*(sin(theta1) - sin(theta2)))*(2*sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))) + 2*cos(theta2)*(sin(theta1) - sin(theta2))))/(4*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(3/2))))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25) + (2*(cos(theta2) - (2*sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))) + 2*cos(theta2)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))*(sin(theta1) + sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2 + (2*(cos(theta1) - (2*sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - ((cos(theta2) - cos(theta1) + 18/25)^2 + (sin(theta1) - sin(theta2))^2)*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))) + 2*cos(theta1)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))*(sin(theta2) + sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2 - (2*(cos(theta1)*cos(theta2) + sin(theta1)*sin(theta2))*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2 + (4*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))*(sin(theta1) + sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2)))*(sin(theta2) + sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^3)/((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))^2/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2 + 1);
 
% dtheta3_dtheta2 = simplify(diff(theta3, theta2))
dtheta3_dtheta2 = (2*((cos(theta2) - (2*sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))) + 2*cos(theta2)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25) + ((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))*(sin(theta2) + sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))))/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2))/((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))^2/(cos(theta2) - cos(theta1) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 + 18/25)^2 + 1);

%% DERIVATE THETA 4
% TN_4 =  (C^2 + S^2)/2;
% theta4 = 2*atan((S - sqrt(C^2 + S^2 - TN_4^2))/(C+TN_4))

theta4 = -2*atan((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) -...
    sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 +...
    (sin(theta1) -sin(theta2))^2/2 - 18/25));

% dtheta4_dtheta2 = simplify(diff(theta4, theta2))
dtheta4_dtheta2 = -(2*((cos(theta2) - (2*sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))) + 2*cos(theta2)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25) + ((sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - sin(theta2) + cos(theta2)*(sin(theta1) - sin(theta2)))*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2))/((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))^2/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2 + 1);

% dtheta4_dtheta2_dtheta2 = diff(dtheta4_dtheta2, theta2)
dtheta4_dtheta2_dtheta2 = (2*((sin(theta2) - (2*cos(theta2)^2 - 2*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2)))^2 + 2*sin(theta2)^2 - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(cos(theta2)^2 + sin(theta2)^2 - cos(theta2)*(cos(theta2) - cos(theta1) + 18/25) + sin(theta2)*(sin(theta1) - sin(theta2))) - 2*cos(theta2)*(cos(theta2) - cos(theta1) + 18/25) + 2*sin(theta2)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)) + (2*sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))) + 2*cos(theta2)*(sin(theta1) - sin(theta2)))^2/(4*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(3/2)))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25) - (2*(cos(theta2) - (2*sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))) + 2*cos(theta2)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - sin(theta2) + cos(theta2)*(sin(theta1) - sin(theta2))))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2 + ((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))*(cos(theta2) + cos(theta2)^2 + sin(theta2)^2 - cos(theta2)*(cos(theta2) - cos(theta1) + 18/25) + sin(theta2)*(sin(theta1) - sin(theta2))))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2 - (2*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - sin(theta2) + cos(theta2)*(sin(theta1) - sin(theta2)))^2*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^3))/((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))^2/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2 + 1) + (2*((cos(theta2) - (2*sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))) + 2*cos(theta2)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25) + ((sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - sin(theta2) + cos(theta2)*(sin(theta1) - sin(theta2)))*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2)*((2*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - sin(theta2) + cos(theta2)*(sin(theta1) - sin(theta2)))*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))^2)/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^3 + (2*(cos(theta2) - (2*sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))) + 2*cos(theta2)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2))/((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))^2/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2 + 1)^2;

% dtheta4_dtheta2_dtheta1 = diff(dtheta4_dtheta2, theta1)
dtheta4_dtheta2_dtheta1 = (2*(((2*cos(theta1)*cos(theta2) - 2*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2)))*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))) + 2*sin(theta1)*sin(theta2) - 2*(cos(theta1)*cos(theta2) + sin(theta1)*sin(theta2))*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)) - ((2*sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))) + 2*cos(theta1)*(sin(theta1) - sin(theta2)))*(2*sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))) + 2*cos(theta2)*(sin(theta1) - sin(theta2))))/(4*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(3/2)))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25) + ((cos(theta1) - (2*sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))) + 2*cos(theta1)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - sin(theta2) + cos(theta2)*(sin(theta1) - sin(theta2))))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2 + ((cos(theta2) - (2*sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))) + 2*cos(theta2)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - sin(theta1) + cos(theta1)*(sin(theta1) - sin(theta2))))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2 - ((cos(theta1)*cos(theta2) + sin(theta1)*sin(theta2))*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2 + (2*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - sin(theta1) + cos(theta1)*(sin(theta1) - sin(theta2)))*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - sin(theta2) + cos(theta2)*(sin(theta1) - sin(theta2)))*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^3))/((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))^2/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2 + 1) - (2*((cos(theta2) - (2*sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta2)*(sin(theta1) - sin(theta2))) + 2*cos(theta2)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25) + ((sin(theta2)*(cos(theta2) - cos(theta1) + 18/25) - sin(theta2) + cos(theta2)*(sin(theta1) - sin(theta2)))*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2)*((2*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - sin(theta1) + cos(theta1)*(sin(theta1) - sin(theta2)))*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))^2)/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^3 + (2*(cos(theta1) - (2*sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))) + 2*cos(theta1)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2))/((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))^2/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2 + 1)^2;

% dtheta4_dtheta1 = simplify(diff(theta4, theta1))
dtheta4_dtheta1 = (2*((cos(theta1) - (2*sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - 2*((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)*(sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) + cos(theta1)*(sin(theta1) - sin(theta2))) + 2*cos(theta1)*(sin(theta1) - sin(theta2)))/(2*((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25) + ((sin(theta1)*(cos(theta2) - cos(theta1) + 18/25) - sin(theta1) + cos(theta1)*(sin(theta1) - sin(theta2)))*(sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2)))/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2))/((sin(theta2) - sin(theta1) + ((cos(theta2) - cos(theta1) + 18/25)^2 - ((cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2)^2 + (sin(theta1) - sin(theta2))^2)^(1/2))^2/(cos(theta1) - cos(theta2) + (cos(theta2) - cos(theta1) + 18/25)^2/2 + (sin(theta1) - sin(theta2))^2/2 - 18/25)^2 + 1);

end